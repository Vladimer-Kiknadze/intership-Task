@if (isLoading$|async) {
<app-spinner></app-spinner>
}@else {
<div class="main-content">
  <div class="users-table-container">
    <div class="users-header">
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input
          type="search"
          id="user-search"
          name="q"
          [(ngModel)]="userSearch"
          (ngModelChange)="onSearchChange($event)"
          placeholder="Search"
          class="search-input"
        />
      </div>
      <h3>Users</h3>
    </div>
    <div class="table-container">
      @if (users$ | async; as users) {
      <ng-container>
        <table *ngIf="users.length > 0; else noUsers">
          <thead>
            <tr>
              <th>ID</th>
              <th>Firstname</th>
              <th>Lastname</th>
              <th>Phone Number</th>
              <th>Email</th>
              <th>Company</th>
              <th>Posts</th>
              <th>Todo list</th>
            </tr>
          </thead>
          <tbody>
            @for (user of users$ | async; track user.id) {
            <tr>
              <td>
                <span>ID: </span>
                {{ user.id }}
              </td>
              <td>
                <span>Firstname: </span>
                {{ user.firstName }}
              </td>
              <td>
                <span>LastName: </span>
                {{ user.lastName }}
              </td>
              <td>
                <span>Phone: </span>
                {{ user.phone }}
              </td>
              <td>
                <span>Email: </span>
                {{ user.email | lowercase }}
              </td>
              <td>
                <span>Company Name: </span>
                {{ user.company.name }}
              </td>
              <td>
                <button
                  class="button btn-stylized"
                  (click)="onClickPosts(user.id)"
                >
                  Posts
                  <i class="fa-solid fa-table-list"></i>
                </button>
              </td>
              <td>
                <a class="button-todo" (click)="onClickTodos(user.id)">
                  <span>Todo List</span>
                  <i class="fa-solid fa-paste"></i>
                </a>
              </td>
            </tr>
            }
          </tbody>
        </table>
        <ng-template #noUsers>
          <div class="no-users-message">
            No users found matching your search criteria.
          </div>
        </ng-template>
      </ng-container>
      }
    </div>
  </div>
</div>
}
